import {LOAD_PRODUCTS, START, SUCCESS, FAILURE} from 'constans'

export function loadProducts(){
	return (dispatch) => {
		dispatch({
			type: LOAD_PRODUCTS+START
		})

		setTimeout(function(){
			fetch('http://www.mocky.io/v2/5918b9461200001f1040dbeb')
				.then(res => {
	          if (res.status >= 400) {
	              throw new Error(res.statusText)
	          }
	          console.log( res );
	          return res.json()
	      })
	      .then(res =>{
	      	console.log(res)
	      	return dispatch({
	          type: LOAD_PRODUCTS + SUCCESS,
	          payload: res
	      	})}
	      )
				.catch( () => {
					dispatch({
						type: LOAD_PRODUCTS+FAILURE
				})
			})
		}, 1500)
			
	}
}