import { 
	START, 
	SUCCESS, 
	FAILURE,
	LOAD_PRODUCTS,
	ADD_CART,
	SEARCH,
	FILTER_BRANDS
} from 'constans'

export function loadProducts(){
	return (dispatch) => {
		dispatch({
			type: LOAD_PRODUCTS+START
		})

		setTimeout(function(){
			fetch('http://www.mocky.io/v2/5918b9461200001f1040dbeb')
				.then(res => {
	          if (res.status >= 400) {
	              throw new Error(res.statusText)
	          }
	          return res.json()
	      })
	      .then(res =>{
	      	return dispatch({
	          type: LOAD_PRODUCTS + SUCCESS,
	          payload: res
	      	})}
	      )
				.catch( () => {
					dispatch({
						type: LOAD_PRODUCTS+FAILURE
				})
			})
		}, 1000)
	}
}

export function addCart(price, id){
	return({
		type: ADD_CART,
		payload: {price, id}
	})
}

export function search(search){
	return({
		type: SEARCH,
		payload: search
	})
}

export function filterBrands(checkboxes){
	return({
		type: FILTER_BRANDS,
		payload: checkboxes
	})
}