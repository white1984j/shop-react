import { 
	START, 
	SUCCESS, 
	FAILURE,
	LOAD_PRODUCTS,
	ADD_CART,
	SEARCH,
	FILTER_BRANDS
} from 'constans'

export function loadCatalog(){
	return (dispatch) => {
		dispatch({
			type: LOAD_PRODUCTS+START
		})
		// http://www.mocky.io/v2/5ace4d412e00002f00c2c25a
		fetch('http://www.mocky.io/v2/5acf55573100005f004ea8df?mocky-delay=1000ms')
			.then(res => {
          if (res.status >= 400) {
              throw new Error(res.statusText)
          }
          return res.json()
      })
      .then(res =>{
      	return dispatch({
          type: LOAD_PRODUCTS + SUCCESS,
          payload: res
      	})}
      )
			.catch( (err) => {
				dispatch({
					type: LOAD_PRODUCTS+FAILURE
			})
		})
	}
}

export function addCart(price, id){
	console.log(arguments)
	return({
		type: ADD_CART,
		payload: {price, id}
	})
}

export function search(search){
	return({
		type: SEARCH,
		payload: search
	})
}

export function filterBrands(checkboxes){
	return({
		type: FILTER_BRANDS,
		payload: checkboxes
	})
}