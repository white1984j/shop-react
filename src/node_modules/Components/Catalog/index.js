import React, {Component} from 'react'
import {connect} from 'react-redux'
import {loadProducts} from 'Actions'

class Catalog extends Component{
	componentDidMount(){
		if( !this.props.loaded || this.props.loading )
			this.props.loadProducts()
	}
	render(){
		const {loading, loaded} = this.props
		function getBody(){
			if( loading && !loaded ) return <p>Loading</p>
			return <p>Catalog</p>
		}
		return(
			<div>
				{getBody()}
			</div>
		)
	}
}

const mapDispatchToProps = (dispatch) => {
	return({
		loadProducts: () => dispatch( loadProducts() )
	})
}
const mapStateToProps = (state) => {
	return{
		loading: state.loadProducts.loading,
		loaded: state.loadProducts.loaded,
		products: state.loadProducts.products
	}
}

export default connect(mapStateToProps, mapDispatchToProps)(Catalog)